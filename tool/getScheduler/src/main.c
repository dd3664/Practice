/****************************************************************************************************/
/*                                           INCLUDE                                                */
/****************************************************************************************************/
#include <stdio.h>
#include <stdlib.h>
#include <sched.h>
/****************************************************************************************************/
/*                                           DEFINES                                                */
/****************************************************************************************************/

/****************************************************************************************************/
/*                                           VARIABLES                                              */
/****************************************************************************************************/
char *sched_policy[] = {
	"SCHED_OTHER",
	"SCHED_FIFO",
	"SCHED_RR"
};
/****************************************************************************************************/
/*                                       STATIC FUNCTIONS                                           */
/****************************************************************************************************/

/****************************************************************************************************/
/*                                       PUBLIC FUNCTIONS                                           */
/****************************************************************************************************/
int main(int argc, char *argv[])
{	
	int pid = 0;
	int policy = 0;
	int sched_priority = 0;
	int ret = 0;
	struct sched_param param = {0};

	if (argc < 2)
	{
		printf("Please input the pid\n");
		return -1;
	}

	pid = atoi(argv[1]);
	policy = sched_getscheduler(pid);
	if (policy < SCHED_OTHER || policy > SCHED_RR)
	{
		printf("sched_getscheduler failed\n");
		return -1;
	}

	ret = sched_getparam(pid, &param);
	if (ret < 0)
	{
		printf("sched_getparam failed\n");
		return -1;
	}
	printf("pid=%d, Policy=%s, priority=%d\n", pid, sched_policy[policy], param.sched_priority);
	return 0;
}
