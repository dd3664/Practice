/****************************************************************************************************/
/*                                           INCLUDE                                                */
/****************************************************************************************************/
#include <stdio.h>
#include <stdlib.h>

/****************************************************************************************************/
/*                                           DEFINES                                                */
/****************************************************************************************************/
#define FILE_PATH "/tmp/file_test"
#define MAX_BUF_LEN 256
/****************************************************************************************************/
/*                                           VARIABLES                                              */
/****************************************************************************************************/

/****************************************************************************************************/
/*                                       STATIC FUNCTIONS                                           */
/****************************************************************************************************/

/****************************************************************************************************/
/*                                       PUBLIC FUNCTIONS                                           */
/****************************************************************************************************/
int main(int argc, char *argv[])
{
	FILE *fp = NULL;
	size_t size = 0;
	char buf1[MAX_BUF_LEN] = {0};
	char buf2[] = "This is a fprintf test";
	char buf3[] = "This is a fwrite test\n";
	
	fp = fopen(FILE_PATH, "a+");
	if (NULL == fp)
	{
		printf("fopen %s failed\n", FILE_PATH);
		return -1;
	}

	fprintf(fp, "%s\n", buf2);
	fflush(fp);

	size = fwrite(buf3, 1, sizeof(buf3) - 1, fp);
	fflush(fp);

	fclose(fp);


	fp = fopen(FILE_PATH, "r");
	if (NULL == fp)
	{
		printf("fopen %s failed\n", FILE_PATH);
		return -1;
	}

	printf("========fgets content=======\n");
	while (fgets(buf1, MAX_BUF_LEN, fp))
	{
		printf("%s", buf1);
	}


	fseek(fp, 0L, SEEK_SET);
	size = fread(buf1, 1, MAX_BUF_LEN, fp);
	buf1[size - 1] = '\0';
	printf("========fread content========\n");
	printf("%s", buf1);

	fclose(fp);

	return 0;
}
